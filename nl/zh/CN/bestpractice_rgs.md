---

copyright:

  years: 2018, 2019
lastupdated: "2019-06-03"

keywords: organize resources, set up resource groups, best practice, resource group strategy

subcollection: resources

---

{:new_window: target="_blank"}  
{:shortdesc: .shortdesc}
{:tip: .tip}
{:note: .note}
{:important: .important}


# 使用资源组来组织资源的最佳实践
{: #bp_resourcegroups}

资源组是一个功能，可用于组织帐户[资源](/docs/resources?topic=resources-resource)以进行访问控制和计费。如果您对使用 Cloud Foundry 空间很熟悉，那么可以考虑使用资源组来组织资源，其方法类似于使用空间来组织资源。资源是您可以创建、管理和包含在资源组中的任何内容。用户不会添加到资源组。只能添加资源。

目前，并非所有服务都支持使用 {{site.data.keyword.Bluemix_notm}} Identity and Access Management (IAM) 访问控制以及分配到资源组。支持 IAM 的服务在您从目录创建新服务实例时，会提示您将这些实例分配给资源组。对资源组中的资源以及资源组本身的访问由 IAM 进行管理。将资源按资源组进行组织后，可以使用 IAM 角色为用户提供对这些资源的访问权。还可以使用 IAM 角色来查看和编辑资源组、向资源组中添加新的服务实例或管理对资源组的访问权。

当您通过完成以下步骤在“身份和访问权”UI 中分配对资源的访问权时，也可以找到支持 IAM 的服务列表：
1. 转至**管理** &gt; **访问权 (IAM)**，然后选择**用户**。
2. 选择任何用户，然后单击**访问权策略**。
3. 选择**分配访问权** > **分配对资源的访问权**。
4. 使用**服务**菜单，选择要分配的服务。对于尚不支持使用 IAM 的所有服务，您可以继续使用 Cloud Foundry 组织、空间和角色。
5. 单击**分配**。

Cloud Foundry 组织、空间和角色与资源组和 IAM 角色有很大不同。Cloud Foundry 角色永远不能授予对资源组内资源的访问权。
{: note}


## 设置资源组
{: #setuprgs}

缺省情况下，所有用户都会有一个可重命名的资源组。分配对所有帐户管理服务的编辑者或管理员角色才能创建资源组。计费帐户允许创建多个资源组来组织资源。通过将资源组织成不同的资源组，您可以：

* 使用最少数量的策略更轻松地分配对一组资源的访问权
* 按资源组查看使用情况信息以方便计费

要创建新的资源组，请完成以下步骤：

1. 转至**管理** > **帐户**。
2. 展开**帐户资源**，然后选择**资源组**。
3. 单击**创建资源组**。
4. 输入资源组的名称。
5. 单击**添加**。

## 向资源组添加资源
{: #addingtorgs}

使用 IAM 访问控制来支持的服务属于资源组，而不属于 Cloud Foundry 组织或空间。在目录中为其中一个服务创建服务实例时，系统会提示您将该实例分配给资源组。

创建实例时选择的资源组是最终选择，无法更改。
{: important}

更多服务支持分配到资源组以及使用 IAM 访问控制，如果您现有的 Cloud Foundry 服务实例有资格迁移，就会在资源列表上显示通知。通过[将服务实例迁移到资源组](/docs/resources?topic=resources-migrate)，您将在所选资源组中创建新的链接实例，而 Cloud Foundry 实例会变成别名。


## 分配对资源组及其中资源的访问权
{: #assigning_access_rgs}

您可通过创建访问策略，为组织成访问组的用户或用户组提供访问权。访问策略需要设置目标和角色。目标通常是服务实例或资源组中的所有服务实例。角色用于定义所允许的访问类型。要使帐户中的用户能够访问和使用资源组中的资源，帐户所有者需要分配两种类型的访问策略：

* 对资源组中资源的访问权。可以授予对组中所有资源的访问权，也可以仅授予对组中所选服务的访问权。
* 允许用户对该组进行管理的访问权，这意味着用户可以查看该组，编辑该组的名称，管理其他人管理该组时所需的访问权，最重要的是可创建新的服务实例并将其添加到组。

有关这两种类型的访问权以及每个分配的平台 IAM 角色允许用户执行哪些操作的更多信息，请参阅下表：

|   |用于访问以管理资源组的操作|针对资源组中资源的操作|
|:-----------------|:--------------|:---------------|
|查看者角色 |查看组及其特征，但不能查看组中的资源|查看组中的资源|
|操作员角色 |不适用 |不适用 |
|编辑者角色 |查看或编辑组的名称或其他特征，但不能对组中的资源执行这些操作|创建、删除、编辑、暂挂、恢复、查看、绑定和管理资源组中资源的访问权|
|管理员角色 |查看、编辑或管理组的访问权，但不能对组中的资源执行这些操作|创建、删除、编辑、暂挂、恢复、查看、绑定和管理资源组中资源的访问权|
{: row-headers}
{: class="comparison-table"}
{: caption="表 1. 对资源组的访问权" caption-side="top"}
{: summary="This table has row and column headers. The row headers identify the selected role of an access policy. The column headers identify the type of policy whether its assigning access to manage a resource group or access to resources within a resource group. The remaining cells tell you the allowable actions based on the type of policy and the specific role that is selected as defined in the header rows."}

如果想要用户创建新的服务实例并将其添加到资源组，必须为用户分配对资源组的“查看者”或更高级别的角色，以及对服务的“编辑者”或更高级别的角色。
{: tip}


## 样本访问策略
{: #sample_policies}

以下样本访问策略可帮助您确定如何分配对帐户中属于资源组的资源的访问权。

1. 策略：授予用户在整个帐户范围对 {{site.data.keyword.Bluemix_notm}} Container Service 的“管理员”平台角色。具有这些详细信息的策略允许用户访问此服务的所有实例，并允许用户在其至少具有“查看者”角色的任何资源组中创建服务实例。如果用户具有对某个资源的“管理员”角色，那么还可以授予其他用户对该资源的访问权。
2. 策略：授予用户对资源组（而不是其成员资源）的“查看者”平台角色。具有这些详细信息的策略允许用户查看此资源组，此权限对于在此资源组中创建任何服务的实例必不可少。
3. 策略：授予用户对资源组中所有资源的“编辑者”平台角色。具有对资源的“编辑者”角色的用户可以编辑或删除该资源。
4. 策略：授予用户对整个帐户（所有支持 IAM 的服务）的“管理员”平台角色。具有这些详细信息的策略允许用户对整个帐户中的任何资源执行任何平台操作，还允许用户对帐户执行管理操作，例如管理帐户中的资源组。

## 用例示例
{: #usecase_examples}

对于下面的每个用例，如果您有一组用户，而您想要所有用户都具有相同级别的访问权，那么您都可以将这些用户添加到[访问组](/docs/iam?topic=iam-groups)中。通过访问组，您可以使用最少数量的访问策略，因为访问组的所有成员都会继承分配给该组的任何访问权。
{: tip}

<ol>
<li><p>我有一个只有 10 个用户的小型帐户，所有这些用户共同努力来完成一个项目。其中一些用户需要管理帐户并为其他用户分配访问权。一些用户需要供应服务实例，这会产生费用。其他用户是应用程序开发者，只需要通过自己的应用程序组件来使用服务实例。</p>
<p>您应该为所有这些用户授予对帐户和缺省资源组的各种角色，而不需要创建更多资源组来分隔资源或限制某些用户访问某些资源。可以根据用户的需求，向用户授予对帐户和缺省资源组的相应角色 - 对于需要管理帐户并授予其他人访问权的用户，授予对帐户的“管理员”角色；对于需要供应服务实例的用户，授予对缺省资源组及其成员的“编辑者”角色；对于仅需要使用服务实例的用户，授予对资源组成员的“写入者”或“读取者”角色。</p>
</li>
<li><p>我有一个包含三个不同团队的帐户，这些团队分别处理三个项目。有几个用户是管理员，需要能够创建新资源组以及为用户分配对资源组的访问权。其余用户只需要访问与其项目相关联的资源组。</p>
<p>我将为管理员分配对所有支持 IAM 的服务的“管理员”角色。我将为其余用户分配对与项目关联的资源组和资源组成员的各种角色 - 对于需要创建实例的用户，分配对资源组的“编辑者”角色；对于需要使用实例的用户，分配对资源组成员的“读取者”或“写入者”角色。</p>
</li>
<li><p>我有一个包含多个资源组的帐户。我有一些用户是整个帐户范围内服务 A 的管理员，需要访问该服务的所有实例以及能够创建实例，但这些用户不需要访问帐户中的其他任何资源。</p>
<p>为此，我将在帐户级别为这些用户分配对服务 A 的“管理员”角色，并为他们分配对帐户中需要在其中创建实例的所有资源组的“查看者”角色。</p>
</li>
<li><p>我的帐户中有一个用户，他只需要访问某个服务中的特定资源。例如，他需要能够在 IBM Cloud Object Storage 中写入存储区 A。此用户不应该看到帐户中的资源组，也不应该访问此 Cloud Object Storage 实例中其他任何服务或其他任何存储区。</p>
<p>我将为此用户授予对特定 Cloud Object Storage 实例中存储区 A 的“写入者”角色。您可以使用特定于服务的界面（本例中为 Cloud Object Storage UI）或主“分配访问权”UI 来授予此策略。建议使用特定于服务的 UI，因为此 UI 会允许您从资源列表中进行选择，而“分配访问权”UI 不会显示超过服务实例级别的资源，您需要手动输入 CRN 才能将策略分配给这些资源。</p>
</li>
<li><p>今天我使用的是 Cloud Foundry 组织和空间，但我打算开始将资源组和访问组用于支持 IAM 的服务。目前，我的用户和资源已组织成用于业务线的组织，空间用于一个业务线内的不同项目。</p>
<p>我将使用资源组来组织资源，就像组织空间那样，将每个资源组想象成一个项目空间。然后，我将设置不同的访问组，以便授予用户必要的权限来访问相应的项目级别资源组。授予权限时，可以授予对资源组中所有资源的访问权，也可以仅授予对资源组中一组所选资源的访问权。因此，您可以为每个访问组设置对资源组内资源的各种不同级别的访问权，从而为每组用户提供使用资源或资源组本身所需的访问权。</p>
</li>
</ol>
